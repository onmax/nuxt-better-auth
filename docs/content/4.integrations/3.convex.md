---
title: Convex
description: Use Convex as your real-time backend with Better Auth.
---

Convex provides a real-time backend with automatic data synchronization. You can combine it with Better Auth to build applications where authenticated users access their own data with live updates.

## Setup

The `nuxt-convex` module connects your Nuxt application to Convex. Better Auth handles authentication while Convex manages your application data.

::steps

### Install nuxt-convex

```bash
npx nuxt module add nuxt-convex
```

### Configure modules

Add both modules to your Nuxt configuration.

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['nuxt-convex', '@onmax/nuxt-better-auth'],
})
```

::

::callout{icon="i-lucide-book" to="https://nuxt-convex.onmax.me" target="_blank"}
See the [nuxt-convex documentation](https://nuxt-convex.onmax.me) for Convex project setup and environment configuration.
::

## Authenticated Queries

Better Auth provides the authenticated user through the `useUserSession` composable. You can pass the user ID to Convex queries to fetch user-specific data with real-time updates.

```vue [app/pages/tasks.vue]
<script setup lang="ts">
import { api } from '#convex/api'

const { user } = useUserSession()
const { data: tasks } = useConvexQuery(
  api.tasks.list,
  computed(() => user.value ? { userId: user.value.id } : undefined),
  { ssr: false }
)
</script>
```

The `computed` wrapper ensures the query re-subscribes automatically when the user changes. When you pass `undefined` as the arguments, Convex pauses the query and returns no data. This behavior prevents unauthorized queries when the user is not authenticated.

::warning
Authenticated queries require `{ ssr: false }`. Convex queries executed on the server during SSR do not receive authentication cookies, which causes them to fail or return empty results.
::

## Convex as Auth Database

`@onmax/nuxt-better-auth` does not ship a Convex database adapter. `nuxt-convex` provides the `convex` database provider and registers it through the `better-auth:database:providers` hook.

See the canonical setup guide: [nuxt-convex Better Auth integration](https://nuxt-convex.onmax.me/integrations/better-auth)

### Enable the Convex provider

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['nuxt-convex', '@onmax/nuxt-better-auth'],
  auth: {
    database: {
      provider: 'convex',
      // Optional override (highest priority for Convex URL resolution).
      // convexUrl: 'https://your-app.convex.cloud',
    },
  },
})
```

::warning
`auth.database.provider = 'convex'` is not available in `clientOnly` mode.
::
