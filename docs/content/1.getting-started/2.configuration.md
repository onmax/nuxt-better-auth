---
title: Configuration
description: Configure the module options and your Better Auth server instance.
navigation.icon: i-lucide-settings
---

## Module Configuration

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['@onmax/nuxt-better-auth'],
  auth: {
    redirects: {
      login: '/login',
      guest: '/'
    },
  }
})
```

::field-group
  ::field{name="clientOnly" type="boolean"}
    Default: `false`

    Enable client-only mode for external auth backends. When `true`:
    - Skips `server/auth.config.ts` requirement
    - Skips server-side setup (API handlers, middleware, schema generation, devtools)
    - Skips secret validation

    Use this when your Better Auth server runs on a separate backend (e.g., standalone h3/Nitro project).

    See [External Auth Backend](/guides/external-auth-backend) guide.
  ::

  ::field{name="serverConfig" type="string"}
    Default: `'server/auth.config'`

    Path to the server auth config file, relative to the project root.
  ::

  ::field{name="clientConfig" type="string"}
    Default: `'app/auth.config'`

    Path to the client auth config file, relative to the project root.
  ::

  ::field{name="redirects" type="{ login?: string, guest?: string }"}
    Default: `{ login: '/login', guest: '/' }`

    Paths to redirect to when `auth` protection is triggered.
    - `login`: Where to redirect unauthenticated users.
    - `guest`: Where to redirect authenticated users trying to access guest-only pages.
  ::

  ::field{name="secondaryStorage" type="boolean"}
    Default: `false`

    Enable KV as secondary storage for sessions. This significantly improves performance by reducing database hits for session validation.

    **Requirement**: Requires [NuxtHub Integration](/integrations/nuxthub) with `hub: { kv: true }`.
  ::

  ::field{name="database.provider" type="'none' | 'nuxthub' | 'convex'"}
    Default: auto (`'nuxthub'` when `hub.db` is configured, otherwise `'none'`)

    Select the database backend used by Better Auth.
    - `'none'`: No DB adapter
    - `'nuxthub'`: Use `@nuxthub/core` database
    - `'convex'`: Use Convex HTTP adapter (requires `nuxt-convex`)
  ::

  ::field{name="database.convexUrl" type="string"}
    Default: auto-detected

    Optional Convex URL override when `database.provider = 'convex'`.
    Priority: `auth.database.convexUrl` → `convex.url` → `runtimeConfig.public.convex.url` → `CONVEX_URL` → `NUXT_PUBLIC_CONVEX_URL`
  ::

  ::field{name="schema.usePlural" type="boolean"}
    Default: `false`

    Pluralize table names (user → users)
  ::

  ::field{name="schema.casing" type="'camelCase' | 'snake_case'"}
    Default: `camelCase`

    Column/table name casing. Falls back to `hub.db.casing` when not specified.
  ::
::

## Server Configuration

Define your authentication logic in `server/auth.config.ts`, including plugins, providers, and settings.

### defineServerAuth

Use the `defineServerAuth` helper to ensure type safety and access context. It accepts an object or function syntax.

```ts [server/auth.config.ts]
import { defineServerAuth } from '@onmax/nuxt-better-auth/config'

// Object syntax (simplest)
export default defineServerAuth({
  emailAndPassword: { enabled: true }
})

// Function syntax (access context)
export default defineServerAuth((ctx) => ({
  emailAndPassword: { enabled: true }
}))
```

::note
The module automatically injects `secret` and `baseURL`. You don't need to configure these in `defineServerAuth`.
- **Secret**: Priority: `nuxt.config.ts` runtimeConfig > `NUXT_BETTER_AUTH_SECRET` > `BETTER_AUTH_SECRET`
- **Base URL**: The module auto-detects the base URL on Vercel/Cloudflare/Netlify. For other platforms, set `NUXT_PUBLIC_SITE_URL`
::

### Context Options

When using the function syntax, `defineServerAuth` callback receives a context object with useful properties:

```ts [server/auth.config.ts]
import { defineServerAuth } from '@onmax/nuxt-better-auth/config'

export default defineServerAuth((ctx) => ({
  emailAndPassword: { enabled: true },

  // Access the database connection via ctx.db when using NuxtHub
  // Example: pass ctx.db to your own plugin/helper.
  // Do not set `database` here - the module injects it from `auth.database.provider`.
  appName: ctx.runtimeConfig.public.siteUrl ? 'Better Auth App' : 'Better Auth',

  // Access runtime config if needed
  // someValue: ctx.runtimeConfig.customKey
}))
```

## Base URL Configuration

The module resolves `siteUrl` using this priority:

| Priority | Source | When Used |
|----------|--------|-----------|
| 1 | `runtimeConfig.public.siteUrl` | Explicit config (always wins) |
| 2 | Request URL | Auto-detected from HTTP request |
| 3 | `VERCEL_URL`, `CF_PAGES_URL`, `URL` | Platform env vars (Vercel, Cloudflare, Netlify) |
| 4 | `http://localhost:3000` | Development only |

Set an explicit site URL in `nuxt.config.ts` for deterministic OAuth callbacks and origin checks:

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  runtimeConfig: {
    public: {
      siteUrl: process.env.NUXT_PUBLIC_SITE_URL || 'http://localhost:3000',
    },
  },
})
```

**Custom domains or self-hosted**: Always set `runtimeConfig.public.siteUrl` (or `NUXT_PUBLIC_SITE_URL`) when using custom domains or deploying to your own VPS/server. Platform env vars return auto-generated URLs, not your custom domain.

```ini [.env]
NUXT_PUBLIC_SITE_URL="https://your-domain.com"
```

::note
For most deployments, the module auto-detects the request URL correctly. Only set `NUXT_PUBLIC_SITE_URL` for custom domains or non-request contexts like seed scripts.
::

## Runtime Config

Configure secrets using environment variables (see [Installation](/getting-started/installation#set-environment-variables)).

```ini [.env]
BETTER_AUTH_SECRET="your-super-secret-key"
NUXT_PUBLIC_SITE_URL="https://your-domain.com" # Optional on Vercel/Cloudflare/Netlify
```

::tip
Prefix the variable with `NUXT_` to use Nuxt's runtime config system (recommended for multi-environment deployments): `NUXT_BETTER_AUTH_SECRET=`
::

## For Module Authors

Other Nuxt modules can extend the authentication configuration:

```ts
// In your Nuxt module
export default defineNuxtModule({
  setup(options, nuxt) {
    nuxt.hook('better-auth:config:extend', (config) => {
      config.plugins = [...(config.plugins || []), myPlugin()]
    })
  }
})
```

Access sessions from server handlers:

```ts
const { user, session } = await getUserSession(event)
if (!user) throw createError({ statusCode: 401 })
```

::callout{icon="i-lucide-arrow-right" to="/getting-started/client-setup"}
Next, set up the **Client Configuration**.
::
