---
title: Configuration
description: Configure the module options and your Better Auth server instance.
navigation.icon: i-lucide-settings
---

## Module Configuration

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['@onmax/nuxt-better-auth'],
  auth: {
    redirects: {
      login: '/login',
      guest: '/'
    },
  }
})
```

::field-group
  ::field{name="clientOnly" type="boolean"}
    Default: `false`

    Enable client-only mode for external auth backends. When `true`:
    - Skips `server/auth.config.ts` requirement
    - Skips server-side setup (API handlers, middleware, schema generation, devtools)
    - Skips `NUXT_BETTER_AUTH_SECRET` validation

    Use this when your Better Auth server runs on a separate backend (e.g., standalone h3/Nitro project).

    See [External Auth Backend](/guides/external-auth-backend) guide.
  ::

  ::field{name="serverConfig" type="string"}
    Default: `'server/auth.config'`

    Path to the server auth config file, relative to the project root.
  ::

  ::field{name="clientConfig" type="string"}
    Default: `'app/auth.config'`

    Path to the client auth config file, relative to the project root.
  ::

  ::field{name="redirects" type="{ login?: string, guest?: string }"}
    Default: `{ login: '/login', guest: '/' }`

    Paths to redirect to when `auth` protection is triggered.
    - `login`: Where to redirect unauthenticated users.
    - `guest`: Where to redirect authenticated users trying to access guest-only pages.
  ::

  ::field{name="secondaryStorage" type="boolean"}
    Default: `false`

    Enable KV as secondary storage for sessions. This significantly improves performance by reducing database hits for session validation.

    **Requirement**: Requires [NuxtHub Integration](/integrations/nuxthub) with `hub: { kv: true }`.
  ::

  ::field{name="schema.usePlural" type="boolean"}
    Default: `false`

    Pluralize table names (user â†’ users)
  ::

  ::field{name="schema.casing" type="'camelCase' | 'snake_case'"}
    Default: `camelCase`

    Column/table name casing. Inherits from `hub.db.casing` if not set.
  ::
::

## Server Configuration

Define your authentication logic in `server/auth.config.ts`, including plugins, providers, and settings.

### defineServerAuth

Use the `defineServerAuth` helper to ensure type safety and access context.

```ts [server/auth.config.ts]
import { defineServerAuth } from '@onmax/nuxt-better-auth'

export default defineServerAuth(() => {
  return {
    emailAndPassword: {
      enabled: true
    }
  }
})
```

::note
The module automatically injects `secret` and `baseURL`. You don't need to configure these in `defineServerAuth`.
- **Secret**: Reads from `NUXT_BETTER_AUTH_SECRET` or `BETTER_AUTH_SECRET`
- **Base URL**: Reads from `NUXT_PUBLIC_SITE_URL`
::

### Context Options

The `defineServerAuth` callback receives a context object with useful properties:

```ts [server/auth.config.ts]
import { defineServerAuth } from '@onmax/nuxt-better-auth'
import { drizzleAdapter } from 'better-auth/adapters/drizzle'

export default defineServerAuth(({ db, runtimeConfig }) => ({
  // Access the database connection (when using NuxtHub)
  database: drizzleAdapter(db),

  // Access runtime config if needed
  // someValue: runtimeConfig.customKey,
}))
```

## Base URL Configuration

The module requires `siteUrl` to be configured via environment variable:

```ini [.env]
NUXT_PUBLIC_SITE_URL="http://localhost:3000"
```

::warning
`NUXT_PUBLIC_SITE_URL` is **required** in all environments. The module will throw an error if not set.
::

## Runtime Config

Configure secrets via environment variables (see [Installation](/getting-started/installation#set-environment-variables)).

```ini [.env]
NUXT_BETTER_AUTH_SECRET="your-super-secret-key"
NUXT_PUBLIC_SITE_URL="http://localhost:3000"
```

## For Module Authors

Other Nuxt modules can extend the authentication configuration:

```ts
// In your Nuxt module
export default defineNuxtModule({
  setup(options, nuxt) {
    nuxt.hook('better-auth:config:extend', (config) => {
      config.plugins = [...(config.plugins || []), myPlugin()]
    })
  }
})
```

Access sessions from server handlers:

```ts
const { user, session } = await getUserSession(event)
if (!user) throw createError({ statusCode: 401 })
```

::callout{icon="i-lucide-arrow-right" to="/getting-started/client-setup"}
Next, set up the **Client Configuration**.
::
