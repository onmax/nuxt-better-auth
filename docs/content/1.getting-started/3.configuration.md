---
title: Configuration
description: Configure the module options and your Better Auth server instance.
---

## Module Configuration

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  auth: {
    redirects: {
      login: '/login',
      guest: '/'
    }
  }
})
```

::field-group
  ::field{name="redirects" type="{ login?: string, guest?: string }"}
    Default: `{ login: '/login', guest: '/' }`
    
    Paths to redirect to when `auth` protection is triggered.
    - `login`: Where to redirect unauthenticated users.
    - `guest`: Where to redirect authenticated users trying to access guest-only pages.
  ::
  
  ::field{name="secondaryStorage" type="boolean"}
    Default: `false`
    
    Enable NuxtHub KV as secondary storage for sessions. This significantly improves performance by reducing database hits for session validation.
    
    **Requirement**: You must enable `hub: { kv: true }` in your `nuxt.config.ts`.
  ::
::

## Server Configuration

The core of your authentication logic resides in `<serverDir>/auth.config.ts`. By default, this is `server/auth.config.ts`. This file allows you to configure Better Auth plugins, providers, and settings.

### defineServerAuth

Use the `defineServerAuth` helper to ensure type safety and access context.

```ts [server/auth.config.ts]
import { defineServerAuth } from '@onmax/nuxt-better-auth'

export default defineServerAuth((options) => {
  return {
    appName: 'My Nuxt App',
    emailAndPassword: {
      enabled: true
    }
  }
})
```

::callout{icon="i-lucide-zap" color="warning"}
**Important**: Do not configure `database`, `secret`, or `baseURL` manually. The module injects these automatically using NuxtHub and runtime config.
::

### Context Options

```ts
export default defineServerAuth(({ db, runtimeConfig }) => ({
  // db: Drizzle database instance
  // runtimeConfig: Nuxt runtime config
}))
```

## Runtime Config

The secret is configured via environment variable (see [Installation](/getting-started/installation#set-environment-variables)).

```ini [.env]
NUXT_BETTER_AUTH_SECRET="your-super-secret-key"
NUXT_PUBLIC_SITE_URL="http://localhost:3000"
```

::callout{icon="i-lucide-arrow-right" to="/getting-started/client-setup"}
Next, set up the **Client Configuration**.
::