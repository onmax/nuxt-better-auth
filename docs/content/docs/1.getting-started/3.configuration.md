---
title: Configuration
description: Configure the module options and your Better Auth server instance.
---

## Module Configuration

You can configure the module behavior directly in `nuxt.config.ts` under the `auth` key.

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  auth: {
    redirects: {
      login: '/login',
      guest: '/'
    }
  }
})
```

::field-group
  ::field{name="redirects" type="{ login?: string, guest?: string }"}
    Default: `{ login: '/login', guest: '/' }`
    
    Paths to redirect to when `auth` protection is triggered.
    - `login`: Where to redirect unauthenticated users.
    - `guest`: Where to redirect authenticated users trying to access guest-only pages.
  ::
  
  ::field{name="secondaryStorage" type="boolean"}
    Default: `false`
    
    Enable NuxtHub KV as secondary storage for sessions. This significantly improves performance by reducing database hits for session validation.
    
    **Requirement**: You must enable `hub: { kv: true }` in your `nuxt.config.ts`.
  ::
::

## Server Configuration

The core of your authentication logic resides in `server/auth.config.ts`. This file allows you to configure Better Auth plugins, providers, and settings.

### defineServerAuth

Use the `defineServerAuth` helper to ensure type safety and access context.

```ts [server/auth.config.ts]
import { defineServerAuth } from '@onmax/nuxt-better-auth'

export default defineServerAuth((options) => {
  return {
    appName: 'My Nuxt App',
    emailAndPassword: {
      enabled: true
    }
  }
})
```

::callout{icon="i-lucide-zap" color="amber"}
**Important**: Do not configure `database`, `secret`, or `baseURL` manually. The module injects these automatically using NuxtHub and runtime config.
::

### Context Options

The callback function receives a context object with:

- `db`: The Drizzle database instance (connected to NuxtHub).
- `runtimeConfig`: Access to Nuxt runtime config.

```ts
export default defineServerAuth(({ db, runtimeConfig }) => ({
  // Use `db` for custom adapters if needed
  // Use `runtimeConfig` for secrets
}))
```

## Runtime Config

Ensure you set the required secrets in your environment or `.env` file.

```ini [.env]
BETTER_AUTH_SECRET="your-super-secret-key"
NUXT_PUBLIC_SITE_URL="http://localhost:3000"
```

::callout{icon="i-lucide-arrow-right" to="/docs/getting-started/client-setup"}
Next, set up the **Client Configuration**.
::